{
  "scene_settings": {
    "backgroundColor": "#000033",
    "gravity": {
      "enabled": false
    },
    "ySortEnabled": false
  },
  "objects": [
    {
      "name": "trial_manager",
      "type": "container",
      "x": 0,
      "y": 0,
      "components": {
        "TrialSegmentManager": {}
      }
    },
    {
      "name": "interaction_menu",
      "type": "container",
      "x": 640,
      "y": 360,
      "components": {
        "InteractionMenuComponent": {}
      }
    },
    {
      "name": "progress_indicator",
      "type": "Text",
      "x": 640,
      "y": 200,
      "text": "議論進行…",
      "components": {
        "ProgressIndicatorComponent": {}
      }
    },
    {
      "name": "timer_container",
      "type": "Container",
      "x": 1100,
      "y": 80,
      "depth": 2000,
      "components": [
        {
          "type": "TrialTimerComponent",
          "params": {
            "timeLimit": 300
          }
        }
      ],
      "list": [
        {
          "name": "timer_bg",
          "type": "Graphics",
          "draw": {
            "type": "roundedRect",
            "x": -150,
            "y": -35,
            "width": 300,
            "height": 70,
            "radius": 15,
            "fill": {
              "color": "0x000000",
              "alpha": 0.6
            },
            "lineStyle": {
              "width": 3,
              "color": "0xffffff",
              "alpha": 0.8
            }
          }
        },
        {
          "name": "timer_text",
          "type": "Text",
          "x": 0,
          "y": 0,
          "origin": 0.5,
          "text": "LIMIT 05:00",
          "style": {
            "fontSize": "36px",
            "color": "#ffffff",
            "fontFamily": "serif"
          }
        }
      ]
    },
    {
      "name": "fast_forward_button",
      "type": "Container",
      "x": 1100,
      "y": 180,
      "depth": 2000,
      "list": [
        {
          "name": "ff_bg",
          "type": "Graphics",
          "draw": {
            "type": "circle",
            "x": 0,
            "y": 0,
            "radius": 40,
            "fill": {
              "color": "0xffffff",
              "alpha": 0.2
            },
            "lineStyle": {
              "width": 2,
              "color": "0xffffff",
              "alpha": 0.5
            }
          }
        },
        {
          "name": "ff_text",
          "type": "Text",
          "x": 0,
          "y": 0,
          "origin": 0.5,
          "text": ">>",
          "style": {
            "fontSize": "32px",
            "color": "#ffffff",
            "fontFamily": "sans-serif",
            "fontStyle": "bold"
          }
        }
      ]
    }
  ],
  "_COMMENT_TEMPLATE_GUIDE": {
    "description": "シナリオライター向け設定ガイド",
    "rules": {
      "UPDATE_TESTIMONY": "「疑問」などで証言を書き換える場合。action='update_testimony'を指定。pre_update_scenarioで短い会話を再生後、自動的に議論の最初(restart)に戻ります。",
      "EVIDENCE_REQUIRED": "証拠品提示が必要な場合。evidence_required='ID'を指定。これがある場合、選択肢を選んだ後に証拠品選択画面が開きます。",
      "CORRECT_FLOW": "正解の場合。correct=true。success_scenario再生後、next_trial_dataがあれば次のパートへ進みます。",
      "FAILURE_FLOW": "不正解(証拠品なし)の場合。correct=false。failure_scenario再生後、自動的に議論の最初(restart)に戻ります。",
      "WRONG_EVIDENCE": "証拠品提示で間違ったものを選んだ場合。failure_scenario_evidenceがあればそれを再生し、その後『再度証拠品選択画面』が開きます(Retry)。",
      "TAGS": "テキスト内で使える演出タグ: {se:音SE名} (再生), {cam:shake} (振動), {chara:感情} (表情変更)。例: 『絶対に{se:bang}{cam:shake}違う！』"
    },
    "example_structure": {
      "text": "疑問：本当に何も？",
      "action": "update_testimony",
      "pre_update_scenario": "短い会話.ks",
      "target": "書き換える証言ID",
      "new_text": "新しい証言テキスト",
      "new_highlights": []
    }
  },
  "trial_data": {
    "timeLimit": 300,
    "timeoutScenario": "chapter1/trial_test_failure.ks",
    "interval": 0,
    "loop_scenario": "chapter1/loop_end.ks",
    "testimonies": [
      {
        "id": "t1",
        "position": "left",
        "text": "私は昨日の夜、{se:popopo}ずっと部屋にいました。",
        "highlights": []
      },
      {
        "id": "t2",
        "position": "right",
        "text": "誰とも会っていませんし、{cam:shake}何も食べていません。",
        "highlights": [
          {
            "text": "食べて",
            "choices": [
              {
                "text": "反論：飴を舐めていた",
                "evidence_required": "candy_wrapper",
                "correct": true,
                "success_scenario": "chapter1/trial_test_success.ks"
              },
              {
                "text": "賛成：空腹だったはずだ",
                "correct": false,
                "failure_scenario": "chapter1/trial_test_failure.ks"
              },
              {
                "text": "疑問：本当に何も？",
                "action": "update_testimony",
                "pre_update_scenario": "chapter1/trial_interim_doubt.ks",
                "target": "t2",
                "new_text": "誰とも会っていませんし、ガムしか噛んでいません。",
                "new_highlights": [
                  {
                    "text": "ガム",
                    "choices": [
                      {
                        "text": "反論：ガムも食べ物だ",
                        "evidence_required": "gum",
                        "correct": true,
                        "success_scenario": "chapter1/trial_test_success.ks"
                      },
                      {
                        "text": "疑問：何味のガム？",
                        "correct": false,
                        "failure_scenario": "chapter1/trial_test_failure.ks"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "id": "t3",
        "position": "center",
        "style": "typewriter",
        "text": "魔法少女が|嘘をつくはずがないでしょう？",
        "highlights": []
      }
    ]
  }
}